# 第6章 进行判断

* [1.1 if语句](#11-if语句)

  * [1.1.1 if-else结构](#111-if-else结构)

  * [1.1.2 复合关系表达式](#112-复合关系表达式)

  * [1.1.3 嵌套的if语句](#113-嵌套的if语句)

  * [1.1.4 else-if结构](#114-else-if结构)

---

* [1.2 switch语句](#12-switch语句)

---

* [1.3 布尔变量](#13-布尔变量)

---

* [1.4 条件操作符](#14-条件操作符)

---

## 1.1 if语句

1. >*$if$* 语句是 *$C$* 语言中通用的 *$if$* 判断语句。
2. >*$if$* 语句的一般形式如下：

```C
if (表达式)
程序代码
```

1. >**如果条件成立**，我们需要执行一条语句（或者用 **大花括号** 括起来的一组语句）时，就可以使用 *$if$* 语句。
2. >如果我们要对程序的 **某些语句进行判断** ，我们就可以使用 *$if$* 语句来完成这项工作。
3. >在 *$C$* 语言中，如果 **一个除法表达式** 的除数和被除数都是 **整数** 的话，计算机实际上按照 **整数除法的规则** 进行。
4. >有 **两种方法** 可以解决计算结果的小数部分被丢弃这种问题。第一种是将一个变量声明为 **浮点数** ，有一个操作数是浮点数，*$C$* 语言将使用浮点数的 **除法规则** 。另一张方法是 **使用类型转换操作符** 。**使用类型转换操作符** 将两个操作数中的任何一个 **强制转型为一个浮点数** 。

---

### 1.1.1 if-else结构

1. >**求余操作符** 可以用来计算 **两个整数相除的余数** 。
2. >在 *$C$* 语言中，用 `if-else` 语法结构处理这种情况：如果第一个 *$if$* 语句的条件为真，那么第二个 *$if$* 语句的条件为假，反过来也是一样。
3. >`if-else` 结构的一般形式如下：

```C
if(表达式)
  语句1
else
  语句2
```

1. >*$if-else$* 结构实际上是对 *$if$* 语句的一种 **扩展** 。如果表达式的值为真，那么就执行语句 *$1$* ，否则的话，执行语句 *$2$* 。无论如何，语句 *$1$* 和语句 *$2$* 总要执行一个，但是 **不会都执行** 。
2. >**两个等号** `==` 是用来 **判断两个操作数是否相等** ，**一个等号** `=` 则是 **赋值操作符** 。

---

### 1.1.2 复合关系表达式

1. >**复合条件表达式** 就是使用 **逻辑与** 或者 **逻辑或** 操作符连接起来的多个 **简单条件判断表达式** 。
2. >**逻辑与** 的符号是 `&&` 。
3. >**逻辑或** 的符号是 `||` 。
4. >在书写 **复合关系表达式** 的时候，我们鼓励读者在适当的地方使用 **括号** 。这样可以增加 **程序的可读性** ，也能够避免 **因为弄错操作符的优先级而带来的麻烦** 。
5. >读者也可以 **使用空格** ，使程序 **显得清楚** 一些， 比如在 复合关系操作符 **&&** 和 **||** 的周围放置额外的空格，这样就可以 **把操作符本身和它们连接的表达式清楚区分开来** 。
6. >*$C$* 语言在表达式的语法方面是 **非常灵活的** 。比如：在程序中，可以不使用 `rem_4` 、 `rem_100` 、 `rem_400` 这三个变量，而是直接在 *$if$* 语句的表达式中进行计算。如下图所示：

```C
if ((year % 4 == 0 && year % 100 ！= 0) || (year % 400 == 0))
```

---

### 1.1.3 嵌套的if语句

1. >在 *$if$* 语句的一般形式中，如果条件表达式的值是真，那么计算机就接着执行 *$if$* 后面的语句，这个语句也有可能是另一个 *$if$* 语句。例如：

```C
if (gameIsOver == 0)
{
  if (playerToMove == YOU)
  {
    printf("Your Move\n");
  }
}
```

1. >实际上，前面的这个语句可以 **用复合条件表达式重新改写** 为下面的等价形式：

```C
if (gameIsOver == 0 && playToMove == YOU)
{
  printf("Your Move\n");
}
```

1. >一般来说， *$else$* 子句总是和 **离它最近** ，而且没有关联的 *$else$* 语句的那个 *$if$* 语句 **相关联** 。
2. >**缩进** 只是用来 **表示我们希望 *$C$* 语言如何解释程序** 。
3. >实际上，**编译器并不关心缩进** 。因此，有些时候，我们 **缩进程序的方式** 和 **计算机执行程序的方式** 可能并不一致。
4. >如果在书写程序的时候，真的遇到内层 *$if$* 语句没有配对的 *$else$* 语句，而外层的 *$if$* 语句有的话，我们可以使用 **括号** 来告诉 **编译器** 这一点。

---

### 1.1.4 else-if结构

1. >在 *$C$* 语言中， *$else$* 子句后面可以是任何合法的 *$C$* 语句，所以当然也可以是 *$if$* 语句。因此在这种情况下，我们一般使用如下的语法结构来处理具有**三种可能结果** 的测试条件：

```C
if (表达式1)
  语句1
else
  if (表达式2)
  语句2
  else
  语句3
```

1. >我们还可以在最后的 *$else$* 子句的后面再增加新的 *$if$* 语句，这样就可以描述 `4 、5` 直到有 **任意个可能结果的测试条件** 。
2. >在编写程序的时候，人们经常使用上面的语法结构，为了 **简化** 和 **清楚** 起见，人们更倾向于使用下面的格式：

```C
if (表达式1)
  语句1
else if (表达式2)
  语句2
else
  语句3
```

1. >通过这个方式排列语句，能够更容易的看出这是一个 **有三种可能结果的条件判断结构** 。
2. >从终端读入一个字符，然后对该字符进行分类，**判断** 它是一个字母，数字还是其他特殊的字符。如果要从终端 **读入字符** ，可以在 *$scanf$* 函数的格式化字符串中使用 %c 。
3. >在程序 **读取用户输入的字符** 并将其保存在字符类型的变量 *$c$* 中以后，我们首先 **判断该字符是否是一个字母** 。
4. >在 **判断该字符是否是一个字母** 时，我们要注意到，一个字母可以是 **大写** 的，也可以是 **小写** 的。我们可以使用下面的条件表达式判断，某个字符是否是小写字母：

```C
(c >= 'a' && c <= 'z')
```

1. >在上述表达式中，如果字符 *$c$* 的值在 `a - z` 之间，表达式的值就是 **真** ，也就是一个 **小写字母** 。同样，下面的表达式判断字符 *$c$* 是否是一个大写字母：

```C
(c >= 'A' && c <= 'Z')
```

1. >上面的判断方法，在所有使用 *$ASCII$* 格式 **保存字符** 的计算机上都是 **有效** 的。
2. >在使用 *$ASCII$* 码的计算机中，字符 `'0'` 在内部被表示为数字 *$48$* ，而字符 `'1'` 表示为数字 *$49$* ，依次类推。
3. >一般来说，如果我们的程序 **从终端读取输入** 的话，那么只有 **用户按下回车（Enter）键** ，计算机才会 **把用户输入的内容传递给程序** 。
4. >**事先察觉** 到那些可能导致程序失败的情况，并 **采取预防性的措施** ，对于编写 **正确、可靠的程序** 是非常重要的。
5. >如果我们对某个程序 **进行足够多的测试** ，就会常常发现，那些 **对特定情况** 没有进行 **充分考虑** 的程序片断。
6. >仅仅测试还是不够的，在编写程序的时候，我们还应该 **经常多次反问** 自己“如果这样将会如何，如果那样将会如何” ，并 **加入相应的语句** 处理这些情况。

---

## 1.2 switch语句

1. >在编程实践中，将 **一个变量与多个变量的值进行比较** ，并决定下一步如何执行是非常常见的。前面我们用 `if-else` 结构来处理这种编程任务，实际上， *$C$* 语言提供了 **一种专门的结构** 用于完成这个任务，这就是 *$switch$* 语句。
2. >*$switch$* 语句的一般格式如下：

```C
switch (表达式)
{
  case value1:
    程序代码
    程序代码
    ···
    break;
  case value2:
    程序代码
    程序代码
    ···
    break;
  case valuen:
    程序代码
    程序代码
    ···
    break;
  default:
    程序代码
    程序代码
    ···
    break;
}
```

1. >需要注意的是，即使 *$case$* 语句后面跟 **有多条语句** ，也 **不需要** 把他们用大花括号括起来。
2. >*$break$* 语句表示某个 *$case$* 语句结束的时候，同时 *$switch$* 语句的执行 **也将中止** 。
3. >读者一定要记得 **在每一个 *$case$* 的最后加上 *$break$* 语句** ，否则程序的 **流程就会流转** 到后面的 *$case$* 中去。
4. >如果表达式的值域任何一个 *$value$* 表达式的值 **都不相等** ，那么程序将执行特殊的 `case--default` 语句。
5. >*$default$* 语句相当于我们前面例子中最后的那个 *$else$* 语句的作用。
6. >实际上， *$switch$* 语句可以用下面等价的 *$if$* 语句结构来代替：

```C
if (表达式 == value1)
{
  程序代码
  程序代码
  ···
}
else if (表达式 == value2)
{
  程序代码
  程序代码
  ···
}
else if (表达式 == valuen)
{
  程序代码
  程序代码
  ···
}
else
{
  程序代码
  程序代码
  ···
}
```

1. >只要记住这一点，我们就能够 **把大块的 *$if$* 语句转换为对应的 *$switch$* 语句** 。
2. >在 *$switch$* 语句的每一个 *$case$* 中加上 *$break$* 语句是一个很好的编程习惯。
3. >在 *$switch$* 语句中， *$case$* 后面的 **常量表达式不能相同** 。但是不同的 *$case$* 表达式的值 **可以执行同一组语句** 。

---

## 1.3 布尔变量

1. >如果我们 **需要生成 *$50$* 以内的质数表** ，那么最简单的方法就是将 *$1$* 到 *$50$* 所有的质数 *$p$* 都执行如下测试：用从 *$2$* 到 `p-1` 的每一个整数去除 *$p$* ，如果能够整除的话，那么 *$p$* 就不是质数，如果每一个整数都不能整除的话，那么 *$p$* 就是质数。
2. >如果我们将一个变量声明为 *$_Bool$* 的类型，那么这个变量的值不是 *$0$* 就是 *$1$* 。这种用途的变量被称为 **标志性变量** 。
3. >**标志变量** 常常用于那些 **只能在两个不同的值之中取一个值** 的场合。除此之外，程序中经常（至少一次）对标志变量 **进行测试** ，检查它是 **打开的** 还是**关闭的** 。根据测试结果的不同，程序采取不同的步骤。
4. >采用数字 *$1$* 代表条件为 **真** ，用数字 *$0$* 代表条件为 **假** ，这是一种很自然的做法，这与计算机内部的 **“位”** 有关。
5. >在本章的每一个程序中，都隐含了 “非 *$0$* 表示条件满足” 和 “*$0$* 表示条件不满足” 这个概念。
6. >**逻辑非操作符的优先级** 与 **单目操作符的优先级** 相同，也就是说，它的优先级 **高于** 所有的二元算术操作符和所有的逻辑操作符。
7. >*$C$* 语言中有一些 **特殊的定义** 可以方便布尔变量的使用。当我们和 **布尔变量** 打交道的时候，可以使用这些定义。它们包括类型 *$bool$* ，值 *$true$*
和 *$false$* 。
8. >一旦包含了标准头文件 *$<stdbool.h>$* ，我们就可以在程序中使用类型 *$bool$* 而不是 *_Bool* 来声明变量。这种变化的主要 **好处** 是：**前者比起后面较为美观，也容易输入** 。

---

## 1.4 条件操作符

1. >**条件操作符** 也许是 *$C$* 语言中最不寻常的操作符，它是一个 **三目操作符** 。
2. >**条件操作符** 使用 **两个符号** ：问号 `?` 和冒号 `:` ，第一个操作数放在问号之前，第二个操作数放在问号和冒号之间，第三个操作数放在冒号之后。
3. >条件操作符的一般格式如下：

```C
(condition)条件表达式？表达式1：表达式2
```

1. >在上述的语句中，表达式 *$condition$* 通常是一个 **条件表达式** 。在计算条件操作符组成的表达式时，首先对它 **求值** 。如果求值的结果为 **真** ，那么程序就对于表达式 *$1$* 求值，求值的结果就是整个条件操作符表达式的值；如果求值的结果为 **假** ，那么程序就对于表达式 *$2$* 求值，并将其结果作为 **整个条件操作符表达式的值** 。
2. >条件操作符的 **优先级非常低** ，除了赋值操作符 `==` 和逗号操作符 `,` 之外，它的优先级比其他的操作符都低。
3. >在条件操作符表达式的 **冒号后面** ，如果附上另外一个条件操作符表达式，就可以达到 `else if` 语句的效果。
4. >在 *$C$* 语言中，条件操作符的 **关联性** 是 **从右向左** 的。
5. >条件操作符表达式并不一定要出现在 **赋值操作符**  的右面，我们可以在任何需要的地方使用它。
6. >在 **定义宏** 的时候，使用 **条件表达式** 会带来很多方便。

---
